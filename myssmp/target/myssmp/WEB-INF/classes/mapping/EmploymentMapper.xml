<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.human.dao.EmploymentDao">

    <resultMap id="EmploymentBaseMap" type="com.human.model.Employment">
        <!--<id column="id" property="id" jdbcType="BIGINT"/>-->
        <id column="employment_id" property="employment_id" jdbcType="INTEGER" />
        <result column="school_id" property="school_id" jdbcType="VARCHAR"/>
        <result column="career_talk_id" property="career_talk_id" jdbcType="VARCHAR"/>
        <result column="company_id" property="company_id" jdbcType="VARCHAR"/>
        <result column="company_name" property="company_name" jdbcType="VARCHAR"/>
        <result column="logo" property="logo" jdbcType="VARCHAR"/>
        <result column="hitCount" property="hitCount" jdbcType="VARCHAR"/>
        <result column="professionals" property="professionals" jdbcType="VARCHAR"/>
        <result column="recruitPost" property="recruitPost" jdbcType="VARCHAR"/>
        <result column="meet_name" property="meet_name" jdbcType="VARCHAR"/>
        <result column="meet_time" property="meet_time" jdbcType="VARCHAR"/>
        <result column="meet_day" property="meet_day" jdbcType="VARCHAR"/>
        <result column="address" property="address" jdbcType="VARCHAR"/>
        <result column="presentLink" property="presentLink" jdbcType="VARCHAR"/>
    </resultMap>

    <sql id="Base_Column_List">
		employment_id, school_id, career_talk_id, company_id,company_name, logo,hitCount, professionals,recruitPost,meet_name,meet_time,meet_day,address,presentLink
	</sql>



    <select id="selectAllEmployment" resultMap="EmploymentBaseMap">
        SELECT * FROM employment
    </select>


    <!-- 查询用户记录总数 -->
    <select id="selectCount" resultType="int">
		select count(*) from employment
	</select>


    <!-- 查询用户记录根据类型 -->
    <select id="selectCountById" resultType="int">
		select count(*) from employment
        <if test="S_ID.toString()=='address'.toString()">
       where address like   "%"#{S_Name}"%"
        </if>
        <if test="S_ID.toString()=='Professional'.toString()">
            where professionals LIKE "%"#{S_Name}"%" or professionals like '%不限专业%' or professionals =''
        </if>
        <if test="S_ID.toString()=='School'.toString()">
            where  school_id like  "%"#{S_Name}"%"
        </if>
        <if test="S_ID.toString()=='CompanyName'.toString()">
            where  company_name like  "%"#{S_Name}"%"
        </if>
	</select>


    <!-- 根据分页数据start 和size查询数据 -->
    <select id="findByPage" parameterType="Map" resultMap="EmploymentBaseMap">
        select
        <include refid="Base_Column_List" />
        from employment
        order by meet_day desc
        <if test="start!=null and size!=null">
            limit #{start},#{size}
        </if>
    </select>

    <!-- 根据地址分页查询数据start 和size查询数据 -->
    <select id="selectEmploymentByAddress" parameterType="Map" resultMap="EmploymentBaseMap">
        select
        <include refid="Base_Column_List" />
        from employment
        where address like    "%"#{address}"%"  order by meet_day desc
        <if test="start!=null and size!=null">
            limit #{start},#{size}
        </if>
    </select>

    <!-- 根据专业分页查询数据start 和size查询数据 -->
    <select id="selectEmploymentByPro" parameterType="Map" resultMap="EmploymentBaseMap">
        select
        <include refid="Base_Column_List" />
        from employment
        where professionals LIKE "%"#{pro}"%" or professionals like '%不限专业%' or professionals ='' order by meet_day desc
        <if test="start!=null and size!=null">
            limit #{start},#{size}
        </if>
    </select>

    <!-- 根据学校分页查询数据start 和size查询数据 -->
    <select id="selectEmploymentBySchool" parameterType="Map" resultMap="EmploymentBaseMap">
        select
        <include refid="Base_Column_List" />
        from employment
        where school_id like   "%"#{School}"%"  order by meet_day desc
        <if test="start!=null and size!=null">
            limit #{start},#{size}
        </if>
    </select>

    <!-- 根据公司名字分页查询数据start 和size查询数据 -->
    <select id="selectEmploymentByCompanyName" parameterType="Map" resultMap="EmploymentBaseMap">
        select
        <include refid="Base_Column_List" />
        from employment
        where company_name like  "%"#{CompanyName}"%"  order by meet_day desc
        <if test="start!=null and size!=null">
            limit #{start},#{size}
        </if>
    </select>

</mapper>